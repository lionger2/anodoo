<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="crm_lead_view_form" model="ir.ui.view">
	        <field name="name">anodoo.lead.form</field>
	        <field name="model">crm.lead</field>
	        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
	        <field name="arch" type="xml">
	        	<xpath expr="//field[@name='date_deadline']" position="before">	            	
	                <field name="expected_revenue"/>
	            </xpath>
	            <xpath expr="//notebook" position="inside">	            	
	                <page name="opportunity_relations" string="商机与商机关系" attrs="{'invisible': [('type', '=', 'lead')]}">
                         <field name="opportunity_relation_ids" context="{'opportunity_id': id}">
	                     	<tree editable='bottom'>
				                <field name="relation_type" />
				                <field name="opportunity_to_id" />
				                <field name="description" />           
				            </tree>
	                     </field>
                     </page>
	            </xpath>
	        </field>
	    </record>
	    
	    <!-- 线索/商机生命周期 model_id: anodoo.lead.lifetime-->
	    <record id="view_anodoo_lead_lifetime_form" model="ir.ui.view">
	        <field name="name">anodoo.lead.lifetime.view.form</field>
	        <field name="model">anodoo.lead.lifetime</field>
	        <field name="priority">100</field>
	        <field name="inherit_id" ref="anodoo_lead.view_anodoo_lead_lifetime_form" />
	        <field name="arch" type="xml">
	        	<xpath expr="//tree" position="inside">	            	
	                <field name="stage_probability" />           
	            </xpath>
	        </field>
	    </record>
	    
	    <!-- 商机报备 model_id: anodoo.sfa.opportunity.register-->
	    <record id="view_anodoo_sfa_opportunity_register_form" model="ir.ui.view">
	        <field name="name">anodoo.sfa.opportunity.register.view.form</field>
	        <field name="model">anodoo.sfa.opportunity.register</field>
	        <field name="priority">100</field>
	        <field name="arch" type="xml">
	            <form string="anodoo_sfa_opportunity_register">
	            	<header>
                        <button name="action_set_won_rainbowman" string="转为商机" type="object" class="oe_highlight"/>
                    </header>
	                <sheet>
		                <group name="group_top">
			                 <group name="group_left">
			                     <field name="name" />
			                     <field name="customer_info" />
			                     <field name="contact_info" />
			                     <field name="planned_revenue" />
			                     <field name="date_deadline" />
			                 </group>
			                 <group name="group_right">
			                     <field name="priority" widget="priority"/>
                                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
			                     <field name="description" />
			                 </group>
			             </group>
	                </sheet>
	            </form>            
	        </field>
	    </record>
	    <record id="view_anodoo_sfa_opportunity_register_list" model="ir.ui.view">
	        <field name="name">anodoo.sfa.opportunity.register.view.list</field>
	        <field name="model">anodoo.sfa.opportunity.register</field>
	        <field name="priority">100</field>
	        <field name="arch" type="xml">
	            <tree>
	                <field name="name" />
	                <field name="customer_info" />
	                <field name="contact_info" />
	                <field name="planned_revenue" />
	                <field name="date_deadline" />       
	                <field name="priority" /> 
	                <field name="tag_ids" widget="many2many_tags"/>          
	            </tree>
	        </field>
	    </record>
	    <record id="view_anodoo_sfa_opportunity_register_search" model="ir.ui.view">
	        <field name="name">anodoo.sfa.opportunity.register.view.search</field>
	        <field name="model">anodoo.sfa.opportunity.register</field>
	        <field name="priority">100</field>
	        <field name="arch" type="xml">
	            <search>
	            	<field name="name" filter_domain="[('name', 'ilike', self)]" />
	            	<field name="customer_info" filter_domain="[('customer_info', 'ilike', self)]" />
	            	<field name="contact_info" filter_domain="[('contact_info', 'ilike', self)]" />
		            <separator/>           	
		           	<group expand="1" string="Group By">
		           		<filter name="groupby_priority"  string="优先级" context="{'group_by':'priority'}" />               	
		           	</group>         	
	            </search>
	        </field>
	    </record>
	</data>
</odoo>